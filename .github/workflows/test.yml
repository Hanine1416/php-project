name: Test
on:
  workflow_dispatch:
  # pull_request:
  #   branches:
  #     - 'development'
  #   paths-ignore:
  #     - 'README.md'
  #     - '.gitignore'
  #     - '.github/**'
defaults:
  run:
    shell: bash
jobs:
  test:
    runs-on: [self-hosted, rootful, dev]
    steps:
      - name: Code checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Install AWS CLI v2
        run: |
          curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o /tmp/awscliv2.zip
          unzip -q /tmp/awscliv2.zip -d /tmp
          rm /tmp/awscliv2.zip
          sudo /tmp/aws/install --update
          rm -rf /tmp/aws/
      - name: Test Commands
        run: |
          aws ssm list-commands
