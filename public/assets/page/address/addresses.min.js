function renameAddressBlock(){var s=$("#address-js-message").data("address");$.each($(".address-block"),function(e,a){$(a).find(".address-label").text(s+" "+(e+1))})}$(document).ready(function(){$(document).ready(function(){$(document).on("click","#new-address-btn",function(e){e.preventDefault(),modalFix(function(){$("body,html").addClass("modal-open scrollable")}),$(".new-address-modal").addClass("active").fadeIn(200,function(){$(".new-address-modal .close").show();var e=$(".new-address-modal").offset().top-60;$("body,html").animate({scrollTop:e},800)})})}),$(document).on("click","#close",function(){$(".new-address-modal .close").click()}),$(document).on("click","button.tile-toggle",function(e){var a,s=$(this),d=$(".update-address-btn:not(:disabled)").first(),t=s.closest(".tile-block");0===d.length?(a=!$(this).closest(".tile-block").hasClass("active"),$(".validate").removeClass("warning"),t.find(".error").remove(),$(".tile-block.active").removeClass("active"),a&&t.addClass("active")):showSaveUpdateBox(d.closest(".tile-block.active"),function(){s.click()})}),$.each($(".country-input"),function(e,a){$(a).select2({placeholder:"",dropdownParent:$(a).parent()})}),$(document).on("change keyup","select,input",function(){var s,e=$(this).closest(".address-block");e.find(".update-address-btn").attr("disabled",(s=!1,$.each(e.find("select[data-value],input[data-value]"),function(e,a){if($(a).val()!=$(a).data("value")&&(null!==$(a).val()||""!=$(a).data("value"))&&"hidden"!==$(a).attr("type"))return!(s=!0)}),!s))}),$(document).on("click",".update-address-btn:not(.loading)",function(e){var s,a,d=$(this),t=d.closest(".address-block");!function(e){var a=e.find(".validate");a.removeClass("warning"),e.find(".error").remove();var d=!0;return $.each(a,function(e,a){var s;null!==$(a).val()&&"undefined"!==$(a).val()&&""!==$(a).val()||!$(a).is(":visible")||$(a).hasClass("empty")||$(a).hasClass("warning")||(s=DOMPurify.sanitize($(a).prop("title")),$(a).addClass("warning").parent().append('<span class="error" style="position: relative;">'+s+"</span>"),d=!1)}),d}(t)||(s={address_id:(a=t).find(".address-id").val(),address1:a.find(".address1-input").val(),address2:a.find(".address2-input").val(),address3:a.find(".address3-input").val(),address4:a.find(".address4-input").val(),city:a.find(".city-input").val(),state:a.find(".state-input").val(),postal_code:a.find(".postalCode-input").val(),country:a.find(".country-input").val()},$.ajax({url:baseUrl+"/profile/delivery-address/update",method:"PUT",data:s,dataType:"JSON",beforeSend:function(){d.addClass("loading"),d.closest(".fieldset").addClass("readOnly")},success:function(e){var a;e.success?(t.find(".address1-input").data("value",s.address1),t.find(".address2-input").data("value",s.address2),t.find(".address3-input").data("value",s.address3),t.find(".address4-input").data("value",s.address4),t.find(".city-input").data("value",s.city),t.find(".state-input").data("value",s.state),t.find(".postalCode-input").data("value",s.postal_code),t.find(".country-input").data("value",s.country),1===(a=$(".unique-address")).length&&(a.removeClass("unique-address"),a.find(".address-del-btn").addClass("hidden")),d.attr("disabled",!0)):showErrorBox(e.message),d.closest(".fieldset").removeClass("readOnly"),d.removeClass("loading")}}))})}),$(document).on("click",".delete-address-btn",function(){var t=$(this).closest(".address-info"),e=$(this).data("address-id"),n=$(".box");1===$(".address-info.br-address").length?(n.find(".error-msg").text($("#delete-last-address-msg").text()),n.attr("class","box active error-info"),n.on("click","#box-ok",function(){n.removeClass("active error-info"),n.off("click")})):($(".address-info").length,n.find(".confirm-msg").text($("#delete-last-address-msg").text()),n.attr("class","box active confirm-info"),n.on("click","#box-confirm",function(){var a=$(this),s=$("#my-addresses"),d=$(".address-info");a.prev().hide(),$(this).addClass("loading"),$.ajax({url:baseUrl+"/profile/delete-address",method:"delete",data:{address:e},dataType:"JSON",success:function(e){e.success?1===d.length?window.location=s.data("url"):(t.remove(),n.removeClass("active confirm-info")):showErrorBox(e.reply),1<d.length&&(a.prev().show(),a.removeClass("loading"))}}),n.off("click")}),n.on("click","#box-cancel",function(){n.attr("class","box"),n.off("click")}))}),$(document).on("click",".disable-address-btn",function(){var e=$(this).closest(".address-info"),d=$(this).data("address-id"),t=$(".box");1===$(".address-info.br-address").length?(t.find(".error-msg").text($("#disable-last-address-msg").text()),t.attr("class","box active error-info"),t.on("click","#box-ok",function(){t.removeClass("active error-info"),t.off("click")})):(1===$(".address-info").length?t.find(".confirm-msg").text($("#disable-last-address-msg").text()):t.find(".confirm-msg").text($("#disable-address-msg").text()),t.attr("class","box active confirm-info"),t.on("click","#box-confirm",function(){var s=$(this);s.prev().hide(),s.addClass("loading"),$.ajax({url:baseUrl+"/profile/disable-address",method:"PUT",data:{address:d},dataType:"JSON",beforeSend:function(){s.addClass("loading"),e.addClass("loading")},success:function(e){var a;e.success?(t.removeClass("active confirm-info"),(a=$('.address-info[data-address-id="'+d+'"]')).addClass("disabled-inst"),a.appendTo(".addresses-container")):showErrorBox(e.reply),s.prev().show(),s.removeClass("loading")}}),t.off("click")}),t.on("click","#box-cancel",function(){t.attr("class","box"),t.off("click")}))}),$(document).on("keypress","[data-max-length]",function(e){$(this).val().length>$(this).data("max-length")&&e.preventDefault()});