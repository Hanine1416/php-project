$(document).ready(function(){initPopover(),closePopover(),$(".new_banner .banner-box").show();var e=11,t=11;$(document).on("click","#load-more",function(){$(".load-more-book").removeClass("hidden"),$("#load-more").addClass("hidden"),$.ajax({url:"/load-more",method:"post",data:{start:e,isMobile:isMobile()},dataType:"html",success:function(o){o=DOMPurify.sanitize(o);$("#recommendation-content .load-more-btn").remove(),$("#recommendation-content").append(o);o=$(".load-recommended-books").attr("data-numberOfRecords");e+=11,$(".load-more-book").addClass("hidden"),$("#load-more").removeClass("hidden"),parseInt(o)<e&&$(".load-recommended-books").addClass("hidden"),$('[data-toggle="tooltip"]').tooltip(),initPopover(),closePopover()}})}),$(document).on("click","#load-more-shared",function(){$(".load-more-book").removeClass("hidden"),$("#load-more-shared").addClass("hidden"),$.ajax({url:"/load-more-shared-book",method:"post",data:{start:t,isMobile:isMobile()},dataType:"html",success:function(o){o=DOMPurify.sanitize(o);$("#shared-book-content .load-more-btn").remove(),$("#shared-book-content").append(o),t+=11,$(".load-more-book").addClass("hidden"),$("#load-more-shared").removeClass("hidden");o=$(".load-shared-books").attr("data-numberOfRecords");parseInt(o)<t&&$(".load-shared-books").addClass("hidden"),$('[data-toggle="tooltip"]').tooltip(),initPopover(),closePopover()}})});var n=$(".box");function i(o){o.parent().removeClass("show-more-menu"),o.attr("aria-hidden",!0)}function s(){let o=$("#step1");$("#checkOneReadingListMsg").hide(),$(".modal-step").removeClass("active"),o.addClass("active"),$(".multi_institutions").prop("checked",!1)}n.find("#box-confirm").text($("#box-msg-yes").text()),n.find("#box-cancel").text($("#box-msg-no").text()),$(".related-banner-slider").slick({slide:"div",dots:!0,infinite:!1,speed:300,slidesToShow:1,slidesToScroll:1,prevArrow:'<button class="slick-prev"><i class="fa fa-chevron-left"></i></button>',nextArrow:'<button class="slick-next"><i class="fa fa-chevron-right"></i></button>',responsive:[{breakpoint:1250,settings:{slidesToShow:1}},{breakpoint:950,settings:{slidesToShow:1}},{breakpoint:700,settings:{slidesToShow:1}},{breakpoint:500,settings:{slidesToShow:1}}]}),$(".related-newbooks-slider").slick({slide:"div",dots:!1,infinite:!1,speed:300,slidesToShow:5,slidesToScroll:5,prevArrow:'<button class="slick-prev"><i class="fa fa-chevron-left"></i></button>',nextArrow:'<button class="slick-next"><i class="fa fa-chevron-right"></i></button>',responsive:[{breakpoint:1250,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:950,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:700,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:500,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".related-books-slider").slick({slide:"div",dots:!1,infinite:!1,speed:300,slidesToShow:5,slidesToScroll:1,prevArrow:'<button class="slick-prev"><i class="fa fa-chevron-left"></i></button>',nextArrow:'<button class="slick-next"><i class="fa fa-chevron-right"></i></button>',responsive:[{breakpoint:1250,settings:{slidesToShow:4}},{breakpoint:950,settings:{slidesToShow:3}},{breakpoint:700,settings:{slidesToShow:2}},{breakpoint:500,settings:{slidesToShow:1}}]}),$(document).on("click",".cover-img",function(o){window.location=$(this).find("a").attr("href")}),$(document).on("click",".beta-release .give-feedback",function(o){$("#feedback-step").addClass("active feedback-modal"),$(".review-book-modal").show().addClass("active"),modalFix(function(){$("body,html").addClass("modal-open active-request scrollable")}),$(".review-book-modal .close").show()}),$(document).on("click","#more-btn",function(o){var e;o.preventDefault(),$(".more").removeClass("show-more-menu"),$(this).parent().find(".more-menu").is(":visible")?i($(this)):((e=$(this)).parent().addClass("show-more-menu"),e.attr("aria-hidden",!1),o.stopPropagation())}),$(document).on("click",function(){var o=$(".recommended-list").find(".more-menu");$.each(o,function(o,e){$(e).is(":visible")&&i($(e))})}),$(document).on("click",".dot-education-consultant",function(){window.location=$(this).find("a").attr("href")}),$(document).on("click",".dot-share-product",function(o){o.preventDefault(),copyToClipboard($(this).find("a").data("link"))}),$(document).on("click",".dot-share-product-popup",function(o){o.preventDefault(),copyToClipboard($(this).find("a").attr("data-link"),"#share-book-modal")}),isMobile()||$(".more-menu-item.for-mobile").remove(),$(document).ready(function(){$(".play").click(function(){$(this).parent().prev().get(0).paused&&($(this).parent().prev().get(0).play(),$(".content").hide())}),$(".video").on("ended",function(){$(".content").show()})}),$(document).on("click",".reading_list_modal #close-modal,#browse_btn",function(o){$(".modal-copy-container").scrollTop(0);var e=$(".request-book-modal"),t=e.find(".modal-step.active").attr("id");localStorage.removeItem("readingListId"),"step2"===t?(closeModal(e),s()):(n.attr("class","box active confirm-info"),n.find(".confirm-msg").text($("#cancel-list-msg").text()),$("body").addClass("box-above-modal"),n.on("click","#box-cancel",function(){n.removeClass("active confirm-info"),n.off("click"),$("body").removeClass("box-above-modal")}).on("click","#box-confirm",function(){n.removeClass("active confirm-info"),closeModal(e),n.off("click"),$("body").removeClass("box-above-modal"),s()}))}),$(".reading-lists input").on("change",function(){0<$(".reading-lists input:checked").length?$("#checkOneReadingListMsg").hide():$("#checkOneReadingListMsg").show()}),$(document).on("click",".remove-recommendation",function(o){var e=DOMPurify.sanitize($(this).attr("data-isbn")),t=$(".box");t.find("#box-confirm").text($("#btn-confirm").text()),t.find("#box-cancel").text($("#cancel-btn-box").text()),t.find(".confirm-msg").text($(".logged-in-tab").attr("data-alert")),t.attr("class","box active confirm-info"),t.on("click","#box-confirm",function(){t.removeClass("active confirm-info"),t.off("click"),$("body").removeClass("modal-open"),$.ajax({url:$("#you_like").attr("data-url-delete"),method:"POST",data:{isbn:e},success:function(o){o.success&&($("#recommendation-content #"+e).remove(),0===$("#recommendation-content .recommended-books-list").length&&$(".no-reading-recommendation").removeClass("hidden"),t.removeClass("active confirm-info"),t.off("click"),$("body").removeClass("modal-open"))}})}),t.on("click","#box-cancel",function(){t.removeClass("active confirm-info"),t.off("click"),$("body").removeClass("modal-open")})}),$(document).on("click",".remove-recommendation-shared",function(o){var e=DOMPurify.sanitize($(this).attr("data-isbn")),t=$(".box");t.find("#box-confirm").text($("#btn-confirm").text()),t.find("#box-cancel").text($("#cancel-btn-box").text()),t.find(".confirm-msg").text($(".logged-in-tab").attr("data-alert")),t.attr("class","box active confirm-info"),t.on("click","#box-confirm",function(){t.removeClass("active confirm-info"),t.off("click"),$("body").removeClass("modal-open"),$.ajax({url:$("#shared_by_colleague").attr("data-url-delete"),method:"POST",data:{isbn:e},success:function(o){o.success&&($("#shared-"+e).remove(),0===$("#shared-book-content .recommended-books-list").length&&$(".no-shared-book").removeClass("hidden"),t.removeClass("active confirm-info"),t.off("click"),$("body").removeClass("modal-open"))}})}),t.on("click","#box-cancel",function(){t.removeClass("active confirm-info"),t.off("click"),$("body").removeClass("modal-open")})}),window.innerWidth<640&&$(".modal-step-content").css("minHeight",$(".request-book-modal").height()-100),$(document).on("keypress",".validate",function(o){if(13===o.keyCode)return o.preventDefault(),!1}),window.history.forward();var o=DOMPurify.sanitize(window.location.hash);$("html,body").animate({scrollTop:$("div"+o).offset().top},"slow")}),$(document).on("pageshow",function(){window.history.forward()}),window.history.pushState(null,null,window.location.href),window.onpopstate=function(){window.history.go(1)};