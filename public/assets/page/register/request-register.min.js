Dropzone.autoDiscover=!1,$(document).ready(function(){var d;$("#request_register_email").on("mouseleave touchend",e=>{var a=$("#request_register_email").val();0<a.length?"de"!==$("#current_lang").data("lang")&&a.includes("@")&&$.ajax({url:baseUrl+"/email-validator",method:"post",data:{email:a},dataType:"JSON",success:function(e){e.success?$("#email-msg").addClass("hidden"):$("#email-msg").removeClass("hidden")}}):$("#email-msg").addClass("hidden")});var l=$("#regRecaptcha");function r(a){var e=$("#utm-source").data("utm-source");let s=baseUrl+"/register";""!=e&&(s=s+"?utm_source="+e),$.ajax({url:s,method:"POST",data:a.serializeArray(),beforeSend:function(){a.find("#submit-register").addClass("loading")},success:function(e){e.success?($("#step-1").remove(),$("#step-2").removeClass("hidden"),$("body,html").animate({scrollTop:60},800)):showErrorBox(e.message),a.find("#submit-register").removeClass("loading")}})}setTimeout(function(){0<l.length&&(d=grecaptcha.render("regRecaptcha",{sitekey:captchaSite,callback:reCaptchaVerify}))},300),$(document).on("submit","#register_form",function(e){e.preventDefault();var a=$("#current_lang").data("lang"),e=$("#current_region").data("region"),s=$(this);!function(){var e=$("#step-1"),a=$("#request_register_firstname"),s=$("#request_register_lastname"),r=$("#request_register_email"),t=DOMPurify.sanitize($("#request_register_password_first")),i=DOMPurify.sanitize($("#request_register_password_second"));e.find(".warning").removeClass("warning"),e.find(".error").remove();var n=!0;$.each([a,s,t,i],function(e,a){null!==$(a).val()&&"undefined"!==$(a).val()&&""!==$(a).val()||($(a).addClass("warning"),a=DOMPurify.sanitize($(a).prop("title")),$("#continue_registration").append('<span class="error"  style="position: relative;">'+a+"</span>"),$("#continue_registration").css("padding","8px 16px"),n=!1)}),n=isMailValid(r.val(),$("#continue_registration"))&&n;s=zxcvbn(t.val()).score;t.val()!==i.val()&&""!==t.val()&&""!==i.val()?(n=!1,r=DOMPurify.sanitize($("#resetPassWrong").text()),$(i).addClass("warning"),$("#continue_registration").append('<span class="error" style="position: relative;">'+r+"</span>")):0<t.val().length&&s<2&&(s=DOMPurify.sanitize(t.data("error")),$(""!==t.val()).addClass("warning"),$("#continue_registration").append('<span class="error" style="position: relative;">'+s+"</span>"),n=!1);$("#confirm_register_tC").is(":checked")||(o=DOMPurify.sanitize($("#terms_accept").data("text")),0===$("#terms_conditions").length&&$("#continue_registration").append(sanitizeHTML('<span id="terms_conditions" class="error">'+o+"</span>")),n=!1);{var o;0<l.length&&!checkReCaptcha(d)&&(o=DOMPurify.sanitize($("#error_captcha").text()),$("#continue_registration").append(sanitizeHTML('<span class="error" style="position: relative">'+o+"</span>")),n=!1)}return n}()||($("#email-msg").addClass("hidden"),"de"===a||"en"===a&&1===e?$.ajax({url:baseUrl+"/email-validator",method:"post",data:{email:$("#request_register_email").val()},dataType:"JSON",beforeSend:function(){s.find("#submit-register").addClass("loading")},success:function(e){e.success?r(s):(showErrorBox(e.reply),s.find("#submit-register").removeClass("loading"))}}):r(s))}),$(document).on("keypress",".validate",function(e){if(13===e.keyCode)return e.preventDefault(),!1}),$(document).on("keyup","#request_register_password_first",function(){$(".ps-st-meter-wrapper").removeClass("hide");var e=$(this).val(),a=$("#ps-st-meter-container");switch(zxcvbn(e).score){case 1:a.removeClass().css("width","25%").addClass("pwd-bad");break;case 2:a.removeClass().css("width","50%").addClass("pwd-medium");break;case 3:a.removeClass().css("width","75%").addClass("pwd-good");break;case 4:a.removeClass().css("width","100%").addClass("pwd-good");break;default:a.removeClass().css("width",0===e.length?"0%":"25%").addClass("pwd-bad")}}),$('[data-toggle="popover"]').popover().on("show.bs.popover",function(){var e=$(this);$.each($(".popover.in"),function(){e!==$(this)&&$(this).prev().click()})}),$("body").on("click touch",function(e){"popover"!==$(e.target).data("toggle")&&0===$(e.target).parents(".popover.in").length&&$('[data-toggle="popover"]').popover("hide")})});