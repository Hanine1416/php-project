$(document).ready(function(){var s="";$(document).on("click","#new-institution-btn",function(t){t.preventDefault(),$(".institution-modal").addClass("active").fadeIn(200,function(){$(".institution-modal .close").show()}),0!=$("#institutions-selector").attr("data-first")?($(".country-block").hide(),""!=s&&$("#complete_register_country").val(s).trigger("change")):$(".country-block").show(),1===$("#current_region").data("region")&&"Australia"===$("#state_filter_modal").data("country")&&$(".institution-block").find(".institution-id").html("<option value=''></option>"),0<$(".multi_institutions:checked").length?($("#institution_isPrimary").prop("checked",!1),$("#institution_isPrimary").attr("disabled",!1)):($("#institution_isPrimary").prop("checked",!0),$("#institution_isPrimary").attr("disabled",!0))}),$(document).on("click",".close-institution-modal",function(t){let i=$("#step1"),n=$("#institutions-selector");$(".institution-modal").hasClass("active")&&(0===n.data("inst")&&!0===i.data("first-request")&&($("#step2").removeClass("active"),i.addClass("active")),closeInstitutionModal())}),$(document).on("click","#addInstitution",function(t){t.preventDefault();var n=$(this).closest("form");submitInstitutionFromModal(n,!0,function(t){var i;1===t.institution.primary&&1==$(".multi_institutions").data("primary")&&$(".multi_institutions").data("primary","0"),t.success?(i=t.institution.institution_name+" - "+t.institution.department_name+" - "+t.institution.profession+" - "+t.institution.speciality,resetInstitutionModalInput(n),$(".institution-modal .close-institution-modal").click(),$("#institutions-selector").append('<option value="'+t.institution.id+'" selected data-institution="'+t.institution.institution_name+'" data-institution-id="'+t.institution.institution_id+'" data-department="'+t.institution.department_name+'" data-department-id="'+t.institution.department_id+'" data-profession="'+t.institution.profession+'" data-speciality="'+t.institution.speciality+'" data-primary="'+t.institution.primary+'" data-country="'+t.institution.country+'">'+i+"</option>").trigger("change"),$("#institution-check-container").append('<div class="input-field user-term small-12 medium-12 large-12 columns checkbox__item"><input name="institution-check-list" class="checkbox__input multi_institutions" type="checkbox" checked value="'+t.institution.id+'" data-institution="'+t.institution.institution_name+'" id="'+t.institution.id+'" data-institution-id="'+t.institution.institution_id+'" data-department="'+t.institution.department_name+'" data-department-id="'+t.institution.department_id+'" data-profession="'+t.institution.profession+'" data-speciality="'+t.institution.speciality+'" data-primary="'+t.institution.primary+'" data-name="'+i+'" data-country="'+t.institution.country+'"><label for="'+t.institution.id+'" class="checlbox__label">'+i+"</label></div>").trigger("change"),$("#institutions-selector").select2({}),s=t.institution.country,t.institution.primary&&null!=t.address&&($("#address_address1").data("value",t.address.address1),$("#address_address2").data("value",t.address.address2),$("#address_address3").data("value",t.address.address3),$("#address_address4").data("value",t.address.address4),$("#address_state").data("value",t.address.state),$("#address_city").data("value",t.address.city),$("#address_postalCode").data("value",t.address.postalCode))):growl(!1,t.message),n.removeClass("loading")})})});