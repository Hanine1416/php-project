var lib=window.lib||{};lib.EmailsInput=function(r){"use strict";function t(e,t){this._options=function(e){const t=e||{};e=$("#emails-input").attr("data-placeholder");return t.placeholder=t.placeholder||e||"add more people ...",t.triggerKeyCodes=t.triggerKeyCodes||[a.enter,a.comma],t.pasteSplitPattern=t.pasteSplitPattern||/(?:,| )+/,t}(t),this._listeners=function(n,t){const e=r.dom.makeEventListenerFactory(n),i=e.addEventListener;return i("click",function(e){e.target.classList.contains("emails-input")&&e.target.querySelector("input").focus(),e.target.classList.contains("remove")&&n.querySelector(".emails-input").removeChild(e.target.parentNode)}),i("focusout",function(e){s(e.target,e.target.value)}),i("paste",function(e){var t=jQuery.Event("keypress");t.which=44,$(document).trigger(t)}),i("keypress",function(e){$(".error-no-mail").hasClass("hidden")||($(".error-no-mail").addClass("hidden"),$("#emails-input .emails-input").removeClass("warning")),$(".error-invalid-mail").hasClass("hidden")||($(".error-invalid-mail").addClass("hidden"),$("#emails-input .emails-input").removeClass("warning")),t.triggerKeyCodes.indexOf(e.keyCode)<0||(e.preventDefault(),s(e.target,e.target.value))}),i("keydown",function(e){if(e.keyCode===a.backspace&&!e.target.value){e=o(n);if(e.length){const t=e[e.length-1];t.remove()}}}),e.handlers}(e,this._options),this._inputContainerNode=e,t=this._options,e.innerHTML='       <div class="emails emails-input">         <input type="text" role="emails-input" placeholder="'+t.placeholder+'">       </div>     '}const a={comma:44,enter:13,backspace:8};return t.prototype.add=function(e){s(this._inputContainerNode.querySelector("input"),e)},t.prototype.remove=function(t){o(this._inputContainerNode).filter(function(e){return e.firstChild.textContent===t}).forEach(function(e){e.remove()})},t.prototype.getValue=function(e){const t=o(this._inputContainerNode);return(e||{}).includeInvalid||!1?t.map(function(e){return e.firstChild.textContent}):t.filter(function(e){return!e.classList.contains("invalid")}).map(function(e){return e.firstChild.textContent})},t.prototype.destroy=function(){const t=this._inputContainerNode;t.innerHTML="",this._listeners.forEach(function(e){t.removeEventListener(e.event,e.handler,!1)}),this._listeners=[]},function(){var e=Object.create(t.prototype);return t.apply(e,Array.prototype.slice.call(arguments)),e};function o(e){return Array.prototype.slice.call(e.querySelectorAll(".emails-input .email-chip"))}function s(e,t){t=t&&t.trim();if(t){const n=document.createElement("span");n.setAttribute("role","email-chip"),n.classList.add("email-chip"),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||n.classList.add("invalid"),n.innerHTML='<span class="content">'+t+'</span><a href="javascript:void(0)" class="remove">Ã—</a>',e.parentNode.insertBefore(n,e),e.value=""}}}(lib.utils);