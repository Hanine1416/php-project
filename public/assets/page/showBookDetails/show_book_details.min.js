function readMore(e){isMobile();var t,i,o=e.data("less"),n=e.data("more");69<e.height()&&(t=Math.floor(e.width()/2*(isMobile()?2.8:1.1)),i=e.text().substring(t+1),e.text(e.text().substring(0,t)),n=DOMPurify.sanitize('<span class="hidden-feedback-msg">'+i+' <a href="javascript:;">'+o+'</a></span><span class="read-more">... <a href="javascript:;">'+n+"</a></span>"),e.append(n))}$(document).ready(function(){var i,e;$(".review").find(".hiddenReview").show(),$.each($(".feedback-comment"),function(){readMore($(this))}),$(".review").find(".hiddenReview").hide(),$(document).on("click",".read-more a",function(e){e.preventDefault(),$(this).parent().hide().prev().show()}),$(document).on("click",".hidden-feedback-msg a",function(e){e.preventDefault(),$(this).parent().hide().next().show()}),0===$(".retailPrice .price").length&&$(".retailPrice").remove(),$(document).on("click",".btn-call-login",function(e){e.preventDefault(),$(".show-login").click(),$("#register-content").removeClass("hidden")}),$(document).on("click",".total_reviews",function(e){e.preventDefault();var t=$(".tile-tab.review");t.addClass("active-tile"),$("#review.title-accordion").addClass("active"),t.find(".hiddenReview").show(),setTimeout(function(){$([document.documentElement,document.body]).animate({scrollTop:t.first().offset().top-170},1e3)})}),-1!==window.location.href.indexOf("#review")&&$(document).ready(function(){var e=$(".tile-tab.review");e.addClass("active-tile"),$("#review.title-accordion").addClass("active"),e.find(".hiddenReview").show(),setTimeout(function(){$([document.documentElement,document.body]).animate({scrollTop:e.first().offset().top-170},1e3)})}),i=jQuery,isMobile()?i(document).on("touchstart",".accordion a.title-accordion",function(e){var t=i(this);t.hasClass("active")?(t.removeClass("active"),t.parent().removeClass("active-tile"),t.next().hide()):(t.next().show(),i(".accordion a.active").removeClass("active").next().hide(),t.addClass("active"),t.parent().addClass("active-tile")),e.preventDefault()}):i(document).on("click",".accordion a.title-accordion",function(e){var t=i(this);t.hasClass("active")?(t.removeClass("active"),t.parent().removeClass("active-tile"),t.next().hide()):(t.next().show(),i(".accordion a.active").removeClass("active").next().hide(),t.addClass("active"),t.parent().addClass("active-tile")),e.preventDefault()}),$(document).on("click",".feedback-zone .fa-times",function(e){$(this).closest(".feedback-zone").toggleClass("opened")}),$('[data-toggle="popover"]').popover().on("show.bs.popover",function(){var e=$(this);$.each($(".popover.in"),function(){e!==$(this)&&$(this).prev().click()})}),$("body").on("click touch",function(e){"popover"!==$(e.target).data("toggle")&&0===$(e.target).parents(".popover.in").length&&$('[data-toggle="popover"]').popover("hide")}),$(".related-books-slider").slick({slide:"div",dots:!1,infinite:!1,speed:300,slidesToShow:5,slidesToScroll:1,prevArrow:'<button class="slick-prev"><i class="fa fa-chevron-left"></i></button>',nextArrow:'<button class="slick-next"><i class="fa fa-chevron-right"></i></button>',responsive:[{breakpoint:1250,settings:{slidesToShow:4}},{breakpoint:950,settings:{slidesToShow:3}},{breakpoint:700,settings:{slidesToShow:2}},{breakpoint:500,settings:{slidesToShow:1}}]}),$(window).width()<=480&&(e=$(".mobileTitle")).unbind("click").bind("click",function(){return e.is(".active")?(e.removeClass("active"),$(this).siblings().slideUp()):(e.removeClass("active"),$(this).addClass("active"),e.siblings().slideUp(),$(this).siblings().slideDown()),!1});var t=$(".more"),o=$(".more-menu");function n(){t.removeClass("show-more-menu"),o.attr("aria-hidden",!0)}$(document).on("click","#more-btn",function(e){e.preventDefault(),o.is(":visible")?n():(t.addClass("show-more-menu"),o.attr("aria-hidden",!1),e.stopPropagation())}),$(document).on("click",function(){0===$(this).closest(".more-menu").length&&o.is(":visible")&&n()}),$(document).on("click",".dot-education-consultant",function(){window.location=$(this).find("a").attr("href")}),$(document).on("click",".dot-share-product",function(e){e.preventDefault(),copyToClipboard($(this).find("a").data("link"))}),$(document).on("click",".dot-share-product-popup",function(e){e.preventDefault(),copyToClipboard($(this).find("a").data("link"),"#share-book-modal")}),isMobile()||$(".more-menu-item.for-mobile").remove();var a=$(".productTabs "+(isMobile()?".mobileTitle":".book-description-tiles li"));0<a.length&&a.first().click(),$(".folder-link").on("click",function(){$(this).hasClass("closed")?$(this).find("i.far").removeClass("fa-folder").addClass("fa-folder-open"):$(this).find("i.far").removeClass("fa-folder-open").addClass("fa-folder"),$(this).toggleClass("closed")}),$(".helpful_icon").click(function(){$(this).toggleClass("active");var e=$(this).data("feedback-id"),t=$(this).hasClass("active"),i=$(this).parent().find(".likes"),o=parseInt(i.text());let n=$(this);n.css("pointer-events","none"),$.ajax({url:"/like-review",method:"post",data:{feedBackId:e,like:t},beforeSend:function(){},success:function(e){e.success&&(1==t?i.text(o+1):i.text(o-1),n.css("pointer-events","auto"))}})})}),$(".show-preview").on("click",function(){var e=$(".preview_link").find("a").data("link");e&&window.open(e,"_blank")}),$(".share-book").click(function(){$("#share-book-modal #step1").addClass("active")});